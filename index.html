<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>长城证券智能驾驶舱</title>
    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;height:100%;margin:0;}</style>
    <link rel="stylesheet" href="index.css">
    <script src="echarts.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g2-3.3.0-beta.4/dist/g2.min.js"></script>
    <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.data-set-0.9.6/dist/data-set.min.js"></script>
    <script src="https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js"></script>
    <script src="https://gw.alipayobjects.com/os/antv/assets/lib/lodash-4.17.4.min.js"></script>
    <script src="https://webapi.amap.com/maps?v=1.4.1&key=0d78256ea89beeb8c25d1cd047549d1f"></script>
    <script src="https://webapi.amap.com/ui/1.0/main.js?v=1.0.11"></script>
</head>
<body>
    <div id="wrap">
        <div class="main">
            <div class="header">
                <div class="datav-wraper">长 城 证 券 智 能 驾 驶 舱</div>
                <div class="time-box">
                    <div class="times"></div>
                    <div class="datas">
                        <span class="weeked"></span>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="cn-left">
                    <h3 class="title" >长城证券股价</h3>
                    <p class="en-title"><span class="en-title-span" style="left:13px;">Stock Price of CGWS</span></p>
                    <div class="great-stock" >
                      <div class="share-price">6.78</div>
                      <div class="change-box">
                         <span class="change" style="width:64px;height:31px;line-height:31px;display:block;">+ 0.25</span>
                         <span class="change" >+ 3.83%</span>
                      </div>
                      <div id="stock" style="width:209px;height:62px;float:left"></div>                     
                    </div>
                    <h3 class="title" style="margin-top:15px;">母公司营业收入同比情况</h3>
                    <p class="en-title"><span class="en-title-span" style="left:7px;">Business income of the company</span></p>
                    <div id="progress-left" style="width:358px;height:350px;"></div>
                </div>
                <div class="cn-center" style="position:relative;">
                    <h3 class="title" >佣金收入分布</h3>
                    <p class="en-title"><span class="en-title-span" style="left:2px;">Commission income distribution</span></p>
                    <div id="center-map" style="width: 620px;height: 450px;"></div>
                    <div class="headquarters">经纪业务总部<span class="headquartersSum"> 28,148 </span>万元</div>
                    <div class="filiale">前海分公司<span class="filialeSum"> 4,977 </span>万元</div>
                </div>
                <div class="cn-right">
                    <h3 class="title">客户资产分布</h3>
                    <p class="en-title"><span class="en-title-span" style="left:-17px;">Distribution of customer assets</span></p>
                    <div class="progress-right">
                        <div id="progress-bottom" style="width:336px;height:150px;left:-10px;top:-10px;"></div>
                        <div id="progress-top" style="width:336px;height:211px;"></div>
                    </div>
                </div>
                <div class="nav">
                    <ul>
                        <li>
                            <h3 class="title" style="padding-top:10px;">营业收入(万元)</h3>
                            <p class="en-title"><span class="en-title-span" style="left:10px;">Operating Revenue</span></p>
                            <h4 style="height:50px;line-height:50px;color:#A94630;font-size:19px;">421,937</h4>
                            <p>排名 28 <b>↑ 3</b></p>
                            <p>同比 <b>＋ 0.5%</b></p>

                        </li>
                        <li>
                            <h3 class="title" style="padding-top:10px;">净利润(万元)</h3>
                            <p class="en-title"><span class="en-title-span" style="left:15px;">Net Profit</span></p>
                            <h4 style="height:50px;line-height:50px;color:#5FE1C1;font-size:19px;">121,937</h4>
                            <p class="">排名 25 <b>↑ 3</b></p>
                            <p>同比 <b>－ 0.5%</b></p>
                        </li>
                        <li>
                            <h3 class="title" style="padding-top:10px;">市场份额</h3>
                            <p class="en-title"><span class="en-title-span" style="left:12px;">Market Share</span></p>
                            <h4 style="height:50px;line-height:50px;color:#B2771B;font-size:19px;">7.02‰ </h4>
                            <p> 较上一日 <b>＋ 0.5%</b></p>
                            <p>同比 <b>＋ 11.5%</b></p>
                        </li>
                        <li>
                            <h3 class="title" style="padding-top:10px;">总客户数</h3>
                            <p class="en-title"><span class="en-title-span" style="left:5px;">Total Customer Number</span></p>
                            <h4 style="height:50px;line-height:50px;color:#EDE506;font-size:19px;">1,654,213</h4>
                            <p>较上一日 <b>+ 0.22%</b></p>
                            <p>有效户率 <b>16.3%</b></p>
                        </li>
                        <li>
                            <h3 class="title" style="padding-top:10px;">客户资产总额(万元)</h3>
                            <p class="en-title"><span class="en-title-span" style="left:8px;">Total Customer Assets</span></p>
                            <h4 style="height:50px;line-height:50px;color:#79DADC;font-size:19px;">5,555,555</h4>
                            <p>较上一日 <b>↑ 0.2%</b></p>
                            <p>较上一年底 <b>- 0.55%</b></p>
                        </li>
                    </ul>
                </div>
                <div class="warning">
                    <h3 class="title">新增客户情况</h3>
                    <p class="en-title"><span class="en-title-span" style="left:-9px;">New customers</span></p>
                    <div id="add-person" style="width:336px;height:240px;"></div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    
window.onload = function () {
//适配
    const wrap = $('#wrap');
    // console.log('wrap==', wrap);
    const body = $('body');
    const w = wrap.width();
    const h = wrap.height();
    const p = w / h;
    const step = function () {
        const bw = body.width();
        const bh = body.height();
        // console.log(w, h, bw, bh);
        const bp = bw / bh;
        // console.log(bp - p);
        let per = 1;
        if (bp > p) per = bh / h;
        else per = bw / w;
        let param = {};
        if (per > 0.5) param = {
            left: (bw - w) / 2 + 'px',
            top: (bh - h) / 2 + 'px',
            transform: `scale(${per}, ${per})`,
        };
        wrap.css(param);
    }
    window.onresize = step;
    step();
// 日期
    function fnDate(){
        var time = document.querySelector('.time-box')
        var date = new Date()
        var year=date.getFullYear();//当前年份
        var month=date.getMonth();//当前月份
        var data=date.getDate();//天
        var week = date.getDay()//周
        var hours=date.getHours();//小时
        var minute=date.getMinutes();//分
        var second=date.getSeconds();//
        var arr = ['星期日','星期一','星期二','星期三','星期四','星期五','星期六']
        var weeks = arr[week]
        var times = year+"年"+fnW((month+1))+"月"+fnW(data)+"日    "+"  " + weeks;
        var datas = fnW(hours)+":"+fnW(minute)+":"+fnW(second)
        var aa = document.querySelector('.times')
        aa.innerHTML = datas
        var bb = document.querySelector('.datas')
        bb.innerHTML = times
    }
    function fnW(str){
    var num;
    str>=10?num=str:num="0"+str;
    return num;
    }
    setInterval(function(){fnDate()},1000)
//母公司营业收入同比情况     
      var myChart = echarts.init(document.getElementById('progress-left'));
      var option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            },
            textStyle:{
                fontSize:9,
            },
        },
        legend: {
            data: ['2018年1-6月', '去年同期'],
            textStyle:{
              color:'#fff',
              fontSize:10
            },
            x:'130px',
            y:'bottom',
            itemWidth:12,
            itemHeight:12
        },
        grid: {
            left: '-5px;',
            top:'2%',
            right: '4%',
            bottom: '7%',
            containLabel: true
        },
        xAxis: {
            type: 'value',
            boundaryGap: [0, 0.01],
            axisLabel:{
               color:'#fff',
               fontSize:10,
            },
            axisLine:{
                lineStyle:{
                    color:'rgb(34, 50, 73)',
                    width:0.5
                }
            },
            axisTick: {
                show: false
            },
            max:50000,
            splitLine: {
                show: true,
                lineStyle:{
                     color: ['rgb(34, 50, 73)'],
                     width:0.5,
                    type: 'dashed'
                }
            },
        },
        yAxis: {
            type: 'category',
            data: ['证券投资收益','融资融券业务利息收入','证券经纪业务净收入','投行业务净收入','受托资产管理费净收入','股权投资收益'],
            axisLabel:{
               color:'#fff',
               fontSize:11,
            },
            axisLine:{
                lineStyle:{
                    color:'rgb(34, 50, 73)',
                    width:0.5
                }
            },
            axisTick: {
                show: false
            },
            left:'-12px'
        },
        series: [
            {
                name: '2018年1-6月',
                type: 'bar',
                data: [10000, 12000, 28000, 29000, 31000, 45000],
                barWidth : 10,
                barGap:0.5,
                itemStyle:{
                  normal:{
                    color:'rgb(53, 189, 208)',
                    barBorderRadius:[10, 10, 10, 10],
                  },
                  emphasis: {
                        barBorderRadius: [10, 10, 10, 10]
                    }
                }
            },
            {
                name: '去年同期',
                type: 'bar',
                data: [9000, 11000, 18000, 30000, 33000, 40000],
                barWidth : 10,
                itemStyle:{
                  normal:{
                    color:'rgb(208, 106, 77)',
                     //柱形图圆角，初始化效果
                    barBorderRadius:[10, 10, 10, 10]
                  },
                  //柱形图圆角，鼠标移上去效果
                  emphasis: {
                        barBorderRadius: [10, 10, 10, 10]
                    },
                }
            },
        ]
    };
    myChart.setOption(option);
//客户资产分布
    var aChart = echarts.init(document.getElementById('progress-top'));
    var option = {
        tooltip : {
            trigger: 'axis',
            textStyle:{
                fontSize:9,
            }
        },
        color:['rgb(53, 189, 208)','rgb(208, 106, 77)','rgb(182, 187, 106)','rgba(208, 106, 77, 0.3)','rgb(58, 61, 117)','rgba(51,163,179,0.7)'],
        grid: {
            left: '1%',
            top:'5%',
            right: '4%',
            bottom: '20%',
            containLabel: true,
        },
        legend: {
            data:['5千-2万    ','2万-10万    ','10万-30万','30万-50万','50万-100万','100万以上'],
            x:'60px',
            y:'bottom',
            itemWidth:12,
            itemHeight:12,
            itemGap:10,
            textStyle:{
              color:'#fff',
              fontSize:9
            },
        },
        xAxis : [
            {
                type : 'category',
                data : ['',],
                axisLine:{
                    lineStyle:{
                        color:'rgb(54, 86, 104)',
                        width:0.5
                    }
                 },
               axisTick: {
                show: false
              },
          }
        ],
        yAxis : [
            {
                type : 'value',
                min:'0',
                max:200000,
                axisLabel:{
                    color:'#fff',
                    fontSize:10,
                },
                axisLine:{
                    lineStyle:{
                        color:'rgb(54, 86, 104)',
                        width:0.5
                    }
                 },
               axisTick: {
                show: false
               },
                splitLine: {
                show: true,
                lineStyle:{
                     color: ['rgb(43, 64, 83)'],
                     width: 0.5,
                    type: 'dashed'
                }
              },
            }
        ],
        series : [
            {
                name:'5千-2万    ',
                type:'bar',
                data:[130000],
                barGap:1
            },
            {
                name:'2万-10万    ',
                type:'bar',
                data:[170000],
                barGap:1
            },
            {
                name:'10万-30万',
                type:'bar',
                data:[80000],
                barGap:1
            },
            {
                name:'30万-50万',
                type:'bar',
                data:[30000],
                barGap:1
            },
            {
                name:'50万-100万',
                type:'bar',
                data:[28000],
                barGap:1
            },
            {
                name:'100万以上',
                type:'bar',
                data:[27000],
                barGap:1
            }
        ]
    };
    aChart.setOption(option);
//客户资产分布
    var dChart = echarts.init(document.getElementById('progress-bottom'));
    var option = {
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)",
            textStyle:{
                fontSize:10,
            },
        },
        color:['rgb(53, 189, 208)','rgb(208, 106, 77)'],
        series : [
            {
                name: '客户资产分布',
                type: 'pie',
                radius: ['40%', '70%'],
                center: ['50%', '60%'],
                data:[
                    {value:335, name:'资产<5000的客户'},
                    {value:60, name:'有效户'},
                ],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    dChart.setOption(option);
//新增客户情况
    var nChart = echarts.init(document.getElementById('add-person'));
    var option = {
        tooltip : {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            },
            textStyle:{
                fontSize:10,
            },
            padding:[0,0,0,10]
        },
        legend: {
            data:['总客户数','有效客户数'],
            x:'center',
            y:'bottom',
            textStyle:{
              color:'#fff',
              fontSize:10
            },
        },
        grid: {
            left: '3%',
            top:'5%',
            right: '4%',
            bottom: '12%',
            containLabel: true,
        },
        xAxis : [
            {
                type : 'category',
                boundaryGap : false,
                data : ['2018年1月','2018年2月','2018年3月','2018年4月','2018年5月','2018年6月','2018年7月','2018年8月'],
                axisLabel:{
                color:'#fff',
                fontSize:9,
                },
                axisLine:{
                    lineStyle:{
                        color:'rgb(39, 61, 81)',
                        width:0.5
                    }
                 },
               axisTick: {
                show: true
              },
            }
        ],
        yAxis : [
            {
                type : 'value',
                max:120,
                splitLine: {
                    show: true,
                    lineStyle:{
                    color: ['rgb(39, 61, 81)'],
                    width:0.5,
                    type: 'dashed'
                    }
                },
                axisLine:{
                    lineStyle:{
                        color:'rgb(39, 65, 86)',
                        width:0.5
                    }
                 },
               axisTick: {
                show: false
              },
                axisLabel:{
                color:'#fff',
                fontSize:10,
                },
            }
        ],
        series : [
            {
                name:'总客户数',
                type:'line',
                stack: '总量',
                areaStyle: {},
                data:[25, 18, 30, 40, 36, 30, 20, 43],
                itemStyle:{
                    normal:{
                        color:'rgb(53, 189, 208)',
                        lineStyle:{
                            color:'rgb(53, 189, 208)'
                        }
                    }
                }
            },
            {
                name:'有效客户数',
                type:'line',
                stack: '总量',
                areaStyle: {},
                data:[25, 18, 20, 40, 36, 40, 30, 43],
                itemStyle:{
                    normal:{
                        color:'rgb(208, 106, 77)',
                        lineStyle:{
                            color:'rgb(208, 106, 77)'
                        }
                    }
                }
            },
        ]
    };
    nChart.setOption(option);
//佣金收入分布  区域颜色图
    function randomValue() {
        return Math.round(Math.random()*1000);
    }
    function refresh(){
    option = {
        tooltip: {
            textStyle:{
                fontSize:10,
            }
        },
        dataRange: {
              x: 'left',
              y: 'bottom',
              splitList: [
                {start: 900, end: 1500,color: '#C75A4A'},
                {start: 500, end: 1000,color: '#C99653'},
                {start: 200, end: 500,color: '#AEB369'},
                {start: 10, end: 200,color: '#736691'},
                {start: 0, end: 10,color: '#53C6D3'}
              ],
              inRange: {
                color: ['#778899']
              },
              left:'right',
              textStyle:{
                    color:'#fff',
                    fontSize:11
              },
          },
        geo: {
            map: 'china',
            // 是否开启鼠标缩放和平移
            roam: true,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        // 修改文字颜色
                        color: '#fff'
                    }
                },
                emphasis: {
                    show: true,
                    // 修改选中后的文字颜色
                    textStyle:{
                        color:'rgb(36, 36, 37)'
                    }
                }
            },
            // 改变地图的初始大小
            zoom: 1.2,
            regions: [
                {
                    name: '南海诸岛',
                    label:{
                        normal: {
                         show: false,
                       },
                     },
                     itemStyle: {
                         normal: {
                            opacity: 0,
                            label: {
                                show: false
                            },
                        },
                    }
                },
            ],
            itemStyle: {
                normal:{
                    //区域图的背景颜色
                    // areaColor: 'rgb(53, 189, 208)',
                    borderColor: 'rgba(0, 0, 0, 0.2)'
                },
                emphasis:{
                    // 选中后的背景高亮颜色
                    areaColor: 'rgb(223, 232, 79)',
                    shadowOffsetX: 0,
                    shadowOffsetY: 0,
                    shadowBlur: 20,
                    borderWidth: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        },
        series : [
            {
                name: '佣金收入(万元)',
                type: 'map',
                roam: true,
                coordinateSystem: 'geo',
                geoIndex: 0,
                selectedMode : 'multiple',
                // tooltip: {show: false},
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        color: '#fff',
                        show: true
                    },
                    emphasis: {
                        show: true,
                        areaColor: 'red'
                    }
                },
                itemStyle: {
                    normal: {
                        color: '#F06C00'
                    },
                },
                data:[
                    {name: '北京', value: randomValue()},
                    {name: '天津', value: randomValue()},
                    {name: '上海', value: randomValue()},
                    {name: '重庆', value: randomValue()},
                    {name: '河北', value: randomValue()},
                    {name: '河南', value: randomValue()},
                    {name: '云南', value: randomValue()},
                    {name: '辽宁', value: randomValue()},
                    {name: '黑龙江', value: randomValue()},
                    {name: '湖南', value: randomValue()},
                    {name: '安徽', value: randomValue()},
                    {name: '山东', value: randomValue()},
                    {name: '新疆', value: ''},
                    {name: '江苏', value: randomValue()},
                    {name: '浙江', value: randomValue()},
                    {name: '江西', value: randomValue()},
                    {name: '湖北', value: randomValue()},
                    {name: '广西', value: randomValue()},
                    {name: '甘肃', value: randomValue()},
                    {name: '山西', value: randomValue()},
                    {name: '内蒙古', value: randomValue()},
                    {name: '陕西', value: randomValue()},
                    {name: '吉林', value: randomValue()},
                    {name: '福建', value: randomValue()},
                    {name: '贵州', value: randomValue()},
                    {name: '广东', value: randomValue()},
                    {name: '青海', value: randomValue()},
                    {name: '西藏', value: ''},
                    {name: '四川', value: randomValue()},
                    {name: '宁夏', value: ''},
                    {name: '海南', value: randomValue()},
                    {name: '台湾', value: randomValue()},
                    {name: '香港', value: randomValue()},
                    {name: '澳门', value: randomValue()},
                ]
            }
        ]
    };
       chart.setOption(option)
    }
    var chart= echarts.init(document.getElementById("center-map"))
    refresh()
    var timer = setInterval(function(){
        refresh()
    },2000)
    chart.on('mousemove',function(){
        clearInterval(timer)
    })
    chart.on('mouseout',function(){
        clearInterval(timer)
        timer = setInterval(function(){
        refresh()
       },1500)
    }) 
// 股票价格
    var sChart= echarts.init(document.getElementById("stock"))
    var dd = [
        "09:30","09:31","09:32","09:33","09:34","09:35","09:36","09:37","09:38","09:39",
        "09:40","09:41","09:42","09:43","09:44","09:45","09:46","09:47","09:48","09:49",
        "09:50","09:51","09:52","09:53","09:54","09:55","09:56","09:57","09:58","09:59",
        "10:00","10:01","10:02","10:03","10:04","10:05","10:06","10:07","10:08","10:09",
        "10:10","10:11","10:12","10:13","10:14","10:15","10:16","10:17","10:18","10:19",
        "10:20","10:21","10:22","10:23","10:24","10:25","10:26","10:27","10:28","10:29",
        "10:30","10:31","10:32","10:33","10:34","10:35","10:36","10:37","10:38","10:39",
        "10:40","10:41","10:42","10:43","10:44","10:45","10:46","10:47","10:48","10:49",
        "10:50","10:51","10:52","10:53","10:54","10:55","10:56","10:57","10:58","10:59",
        "11:00","11:01","11:02","11:03","11:04","11:05","11:06","11:07","11:08","11:09",
        "11:10","11:11","11:12","11:13","11:14","11:15","11:16","11:17","11:18","11:19",
        "11:10","11:11","11:12","11:13","11:14","11:15","11:16","11:17","11:18","11:19",
        "11:10","11:11","11:12","11:13","11:14","11:15","11:16","11:17","11:18","11:19",       
      ];
      var cc = [
         5,5,7,7,8,7,7,8,10,12,7,8,10,12,10,7,4,10,5,3,1,-1,-2,-4,-5,-7,-4,-2,-1,-5,-7,-8,-10,-15,-10,-4,-2,-1,-5,-7,-8,-10,-15,-10,-8,-7,-6,-6,-8,-5,-3,-2,-1,3,
         4,5,7,9,12,15,17,18,5,7,9,12,15,10,5,3,8,10,12,15,8,4,-2,-5,-10,-12,-8,-10,-15,-10,-8,-7,-6,-6,-8,-5,-3,-2,-1,3,
         4,5,7,9,12,15,17,10,5,3,8,10,12,15,8,4,-2,-5,-10,-12,-8,-10,-15,-10,-8,-7,6,-6,-8,-5,-3,-2,-1,3,
         4,5,7,9,12,15,17,10,5,3,8,10,12,15,8,4,-2,-5,-10,12,-8,-10,-15,-10,-8,-7,6,-6,-8,-5,-3,-2,-1,3,4,4,4,7,7,8,8,10,10,15,15,17,10,

      ];
      sChart.setOption(option = {
        tooltip: {
            trigger: 'axis'
        },
        grid: {
            left: '3%',
            top:'20%',
            right: '4%',
            bottom: '20%',
            containLabel: true,
        },
        xAxis: {
            // data: data.map(function (item) {
            //     return item[0];
            // })
            data:dd,
            axisTick:{
                show:false
            },
            axisLine:{
                lineStyle:{
                    color:'#747E89',
                }
            },
            axisLabel : {
                show:false
            },
        },
        yAxis: {
            axisLine:{
                show:false
            },
            scale:true,
            min: function(value) {
                return value.min;
            },
            max: function(value) {
                return value.max;
            },
            axisLabel : {
                textStyle: {
                    color: '#eff0f2',
                    fontSize:11
                },
                // formmatter: function(value){
                //     var texts = [];
                //     if(value == 6){
                //        texts.push(6);
                //     }
                // }
            },
            splitNumber:1,
            splitLine: {
                show: false
            },
            axisTick:{
                show:false
            }
        },
        dataZoom: [{
            show:false
        }],
        visualMap: {
            show:false,
            top: 10,
            right: 10,
            pieces: [{
                gt: 0,
                lte: 100,
                color: '#B31E23'
            }, {
                gt: -100,
                lte: 0,
                color: '#62BB8E'
            }],
        },
        series: {
            name: '长城股价',
            type: 'line',
            // data: data.map(function (item) {
            //     return item[1];
            // }),
            data:cc,
            symbol:'none', 
            smooth:true,
            itemStyle:{
                normal:{
                    lineStyle:{
                        width:1.2
                    }
                }
            },
            // markLine: {
            //    itemStyle: {
            //         normal: { lineStyle: { type: 'solid', color:'#000' },label: { show: true, position:'left',showSymbol:false,} }
            //     },
            //     silent: true,
            //     data: [{
            //         yAxis: 6
            //     }]
            // }
        }
     });
    setTimeout(function(){
        $('#wrap').css({'display':'block'})
    },50)
}
</script>
</html>